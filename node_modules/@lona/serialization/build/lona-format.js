"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var SERIALIZATION_FORMAT;
(function (SERIALIZATION_FORMAT) {
    SERIALIZATION_FORMAT["JSON"] = "json";
    SERIALIZATION_FORMAT["SOURCE"] = "source";
})(SERIALIZATION_FORMAT = exports.SERIALIZATION_FORMAT || (exports.SERIALIZATION_FORMAT = {}));
function detectFormat(contents) {
    if (contents.startsWith('{') || contents.startsWith('[')) {
        return SERIALIZATION_FORMAT.JSON;
    }
    return SERIALIZATION_FORMAT.SOURCE;
}
exports.detectFormat = detectFormat;
function normalizeFormat(contents, sourceFormat) {
    const normalized = sourceFormat || detectFormat(contents);
    if (normalized !== SERIALIZATION_FORMAT.JSON &&
        normalized !== SERIALIZATION_FORMAT.SOURCE) {
        throw new Error(`Invalid source serialization format specified: ${normalized}`);
    }
    return normalized;
}
exports.normalizeFormat = normalizeFormat;
